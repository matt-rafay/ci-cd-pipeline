FROM nginxinc/nginx-unprivileged:alpine

LABEL maintainer="Matt Kryshak <matt.kryshak@nginx.com>"

COPY html /usr/share/nginx
COPY nginx/certs /etc/nginx/certs
COPY nginx/default-unprivileged.conf /etc/nginx/conf.d/default.conf
COPY nginx/nginx-unprivileged.conf /etc/nginx/nginx.conf

USER root

RUN set -x \
    && chown -R 101:0 /etc/nginx

EXPOSE 8080 8443

USER 101

CMD ["nginx", "-g", "daemon off;"]
